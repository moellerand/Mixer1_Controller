/*  ITS90_Data.h
 *  Look-up table for thermocouple type K temperatur to voltage conversion
 *  by Andi Moeller
 *  20231210
 *  
 * 
 * 
 * 
 */


//############################################################################
//############################################################################
//############################################################################
#ifndef ITS90_data
#define ITS90_data
//############################################################################


/* see https://srdata.nist.gov/its90/type_k/0to300.html
  and  https://srdata.nist.gov/its90/type_k/kcoefficients_inverse.html
  t90 = d0 + d1*E + d2*E^2 + ... dn*E^n    where E is in mV and t90 is in °C. 
                                      Type K Thermocouples Coefficients in mV Temperature Range: 	
                                              -200 °C to 0 °C 	  0 °C to 500 °C 	    500 °C to 1372 °C
                                      Voltage Range: 	
                                            -5.891 mV to 0 mV 	  0 mV to 20.644 mV 	20.644 mV to 54.886 mV
                                      d0 = 	 0.000000 	x10^0 	 0.000000 	x10^0 	  -1.318058 	x102
                                      d1 = 	 2.5173462 	x10^1 	 2.508355 	x10^1 	   4.830222 	x101
                                      d2 = 	-1.1662878 	x10^0 	 7.860106 	x10^-2 	  -1.646031 	x100
                                      d3 = 	-1.0833638 	x10^0 	-2.503131 	x10^-1 	   5.464731 	x10-2
                                      d4 = 	-8.9773540 	x10^-1 	 8.315270 	x10^-2 	  -9.650715 	x10-4
                                      d5 = 	-3.7342377 	x10^-1 	-1.228034 	x10^-2 	   8.802193 	x10-6
                                      d6 = 	-8.6632643 	x10^-2 	 9.804036 	x10^-4 	  -3.110810 	x10-8
                                      d7 = 	-1.0450598 	x10^-2 	-4.413030 	x10^-5 	 
                                      d8 = 	-5.1920577 	x10^-4 	 1.057734 	x10^-6 	 
                                      d9 = 	  	                -1.052755 	x10^-8 	 
                                      Error Range:
                                          -0.02 °C to 0.04 °C 	-0.05 °C to 0.04 °C 	-0.05 °C to 0.06 °C

  ////////// The folowing approach is not useful for voltages / temperatures above 20mV / 500°C 
  ////////// E.g. A negative temperature appear @ +35mV.
  const float d[10] = { 
     0.0E0, 
     2.508355E+1, 
     7.860106E-2, 
    -2.503131E-1, 
     8.315270E-2,
    -1.228034E-2,
     9.804036E-4,
    -4.413030E-5,
     1.057734E-6,
    -1.052755E-8
  };
  float mVolt; 
  mVolt = Volt * 1000.0;
  float temp = 0.0;
  float EtoP = 1.0;
  for(int32_t i = 1; i < 10; i++) {
    EtoP *= mVolt; // generates the powers of mVolt
    temp += d[i] * EtoP;
  }
  */



#define ITS90_MAX_POINTS 38
typedef struct {
  float Temp;
  float Volt;
} point;

#define Volt_20C      (0.0007980)  // voltage @ 20°C for type K thermocouples 
#define Volt_20C_divC (0.0000403)  // voltage coeffizient V/°C  @ 20°C (10°C to 30°C)

const point ITX90_table[ITS90_MAX_POINTS] = {
  { -270.0, -0.006458}, // #0
  {  -30.0, -0.001156},
  {  -20.0, -0.000778},
  {  -10.0, -0.000392},
  {    0.0,  0.000000},
  {   10.0,  0.000397},
  {   20.0,  0.000798},
  {   30.0,  0.001203},
  {   40.0,  0.001612},
  {   50.0,  0.002023}, 
  {   60.0,  0.002436},
  {   70.0,  0.002851},
  {   80.0,  0.003267},
  {   90.0,  0.003682},
  {  100.0,  0.004096},
  {  120.0,  0.004920},
  {  140.0,  0.005735},
  {  160.0,  0.006540},
  {  180.0,  0.007340},
  {  200.0,  0.008138},
  {  220.0,  0.008940},
  {  240.0,  0.009747},
  {  260.0,  0.010561},
  {  280.0,  0.011382},
  {  300.0,  0.012209},
  {  350.0,  0.014293},
  {  400.0,  0.016397},
  {  450.0,  0.018516},
  {  500.0,  0.020644},
  {  550.0,  0.022776},
  {  600.0,  0.024905},
  {  700.0,  0.029129},
  {  800.0,  0.033275},
  {  900.0,  0.037326},
  { 1000.0,  0.041276},
  { 1100.0,  0.045119},
  { 1200.0,  0.048838},
  { 1300.0,  0.052410}
};


//############################################################################
#endif // ifndef ITS90_data
//############################################################################
//############################################################################
//############################################################################
//############################################################################
//############################################################################
